# 预测算法设计


## 名词解释

|字段名|字段说明|
|--|--|
|fight_spirit|斗志|
|win_rate|胜率|
|goal_number | 进球数 |
|lose_number | 失球 |
|attack_ability|进攻能力 (goal_number / game_number) *3 |
|defence_ability|防守能力 10 - (lose_number / game_number)*3 |
|general_ability|综合能力|

## 球队定档

```
        根据ranks平均排名来区分
        在联赛中一般18~20支球队，中超16支
        1~4：上游球队
        5~8：中上游球队
        9~12：中下游球队
        13~16：下游球队
        17+: 保级球队
```

`球队水平指标 = [20 - ava(recent_rank)]/ 20 * 10`

## 斗志计算

斗志范围 `[0,10]`
基础斗志为 5

斗志 = 基础斗志 + 争冠斗志 + 保级斗志 + 晋级斗志

1. 争冠斗志

- 指排名在前面和争冠队伍分差不大的情况
- 在排名1~4名之间才有该斗志

分差越小斗志越大

争冠斗志 = (1 / 和第一名分差) * 0.2

2. 保级斗志

- 指在排名末尾有保级希望的情况

保级斗志 = (1/保级球队分差) * 0.2

3. 晋级斗志

- 指有希望晋级或者获得欧联资格、欧冠资格的可能

晋级斗志 = (1/晋级分差) * 0.1

## 综合能力计算

genernal_abiltiy = sum(recent_battles) * factor + 球队水平指标 * factor + 胜率*factor 

## 胜负预测

胜率指数 = 斗志值*系数 + 胜率（有主客之分）* 系数 + 进攻能力*系数+防守能力*系数+综合能力*系数

推荐指数 = abs(主队胜率指数-客队胜率指数)*2/(主队胜率指数+客队胜率指数)

## 进球数预测

进球指数 = 场均进球数*0.4 + 近期场均进球数*0.6
失球指数 = 场均失球数*0.4 + 近期场均失球数) * 0.6

进球数 =  (主队进攻指数+客队防守指数)*0.5 + (客队进球指数+主队失球指数)*0.5

## 比分预测

主队比分 = 进球数 * 主队胜率指数/(主队胜率指数+客队胜率指数) 

客队比分 = 进球数 * 客队胜率指数/(主队胜率指数+客队胜率指数) 

